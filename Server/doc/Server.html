<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Thu Oct 05 22:25:10 BST 2017 -->
<title>Server</title>
<meta name="date" content="2017-10-05">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Server";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Server.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="Server.ThreadHandler.html" title="class in &lt;Unnamed&gt;"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?Server.html" target="_top">Frames</a></li>
<li><a href="Server.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h2 title="Class Server" class="title">Class Server</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>Server</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">Server</span>
extends java.lang.Object</pre>
<div class="block">This class defines a Server that can
 <ul>
 <li>Listen for new connections from clients.</li>
 <li>Handle connections from multiple clients.</li>
 <li>Respond to client requests.</li>
 <li>Broadcast chat message to all clients.</li>
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="Server.ThreadHandler.html" title="class in &lt;Unnamed&gt;">Server.ThreadHandler</a></strong></code>
<div class="block">
 A ThreadHandler receives messages or commands from a client and make
 responses.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="Server.html#adminPassword">adminPassword</a></strong></code>
<div class="block">
 The Administrator Password.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.util.HashSet&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="Server.html#admins">admins</a></strong></code>
<div class="block">The set of names of Administrators.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.util.concurrent.ConcurrentHashMap&lt;java.lang.String,java.util.HashSet&lt;java.lang.String&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="Server.html#blockList">blockList</a></strong></code>
<div class="block">The block list in which each user (name) is a Key while each Value is the
 set of users (name) that have been blocked by this user.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.util.concurrent.ConcurrentHashMap&lt;java.lang.String,java.io.PrintWriter&gt;</code></td>
<td class="colLast"><code><strong><a href="Server.html#clients">clients</a></strong></code>
<div class="block">
 The Map storing each user's name(key) and its corresponding
 PrintWriter(value).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="Server.html#CODE">CODE</a></strong></code>
<div class="block">The code used in the encryption and decryption of messages.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.util.concurrent.ExecutorService</code></td>
<td class="colLast"><code><strong><a href="Server.html#exec">exec</a></strong></code>
<div class="block">
 The thread pool used to hold new threads.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="Server.html#PORT">PORT</a></strong></code>
<div class="block">The Port Number of the server.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="Server.html#SEPARATOR">SEPARATOR</a></strong></code>
<div class="block">A separator.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="Server.html#serverIP">serverIP</a></strong></code>
<div class="block">The IP Address of the server.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.net.ServerSocket</code></td>
<td class="colLast"><code><strong><a href="Server.html#ss">ss</a></strong></code>
<div class="block">socket: The server socket.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="Server.html#startTime">startTime</a></strong></code>
<div class="block">The start time of the server.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="Server.html#Server()">Server</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="Server.html#encode(java.lang.String)">encode</a></strong>(java.lang.String&nbsp;str)</code>
<div class="block">
 Uses XOR Cipher to encode or decode a message.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="Server.html#getCurrentTime()">getCurrentTime</a></strong>()</code>
<div class="block">Gets the current time in a specific format.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="Server.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>
<div class="block">Main method: start the server.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="CODE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CODE</h4>
<pre>private static final&nbsp;int CODE</pre>
<div class="block">The code used in the encryption and decryption of messages.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="constant-values.html#Server.CODE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="PORT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PORT</h4>
<pre>private static final&nbsp;int PORT</pre>
<div class="block">The Port Number of the server.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="constant-values.html#Server.PORT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="serverIP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serverIP</h4>
<pre>private static&nbsp;java.lang.String serverIP</pre>
<div class="block">The IP Address of the server.</div>
</li>
</ul>
<a name="ss">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ss</h4>
<pre>private static&nbsp;java.net.ServerSocket ss</pre>
<div class="block">socket: The server socket.</div>
</li>
</ul>
<a name="exec">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exec</h4>
<pre>private static&nbsp;java.util.concurrent.ExecutorService exec</pre>
<div class="block"><p>
 The thread pool used to hold new threads.
 </p>
 A thread pool is able to run and control threads efficiently and safely,
 especially for the case in which a large amount of clients connect to the
 server at the same time.</div>
</li>
</ul>
<a name="startTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startTime</h4>
<pre>private static&nbsp;long startTime</pre>
<div class="block">The start time of the server.</div>
</li>
</ul>
<a name="clients">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clients</h4>
<pre>private static&nbsp;java.util.concurrent.ConcurrentHashMap&lt;java.lang.String,java.io.PrintWriter&gt; clients</pre>
<div class="block"><p>
 The Map storing each user's name(key) and its corresponding
 PrintWriter(value).
 </p>
 In the multi-threading environment, A CurrentHashMap can perform more
 safely and efficiently than a HashMap.</div>
</li>
</ul>
<a name="blockList">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockList</h4>
<pre>private static&nbsp;java.util.concurrent.ConcurrentHashMap&lt;java.lang.String,java.util.HashSet&lt;java.lang.String&gt;&gt; blockList</pre>
<div class="block">The block list in which each user (name) is a Key while each Value is the
 set of users (name) that have been blocked by this user.</div>
</li>
</ul>
<a name="adminPassword">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>adminPassword</h4>
<pre>private static&nbsp;int adminPassword</pre>
<div class="block"><P>
 The Administrator Password. 
 </P>
 For the sake of security, every time the server restarts, it will
 generate a new random 4-digit password on its screen.</div>
</li>
</ul>
<a name="admins">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>admins</h4>
<pre>private static&nbsp;java.util.HashSet&lt;java.lang.String&gt; admins</pre>
<div class="block">The set of names of Administrators.</div>
</li>
</ul>
<a name="SEPARATOR">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SEPARATOR</h4>
<pre>private static final&nbsp;java.lang.String SEPARATOR</pre>
<div class="block">A separator.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="constant-values.html#Server.SEPARATOR">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Server()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Server</h4>
<pre>public&nbsp;Server()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="encode(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encode</h4>
<pre>private static&nbsp;java.lang.String&nbsp;encode(java.lang.String&nbsp;str)</pre>
<div class="block"><p>
 Uses XOR Cipher to encode or decode a message.
 </p>
 Since x ^ y ^ y = x (^ is XOR operation), XOR can be used as a cipher.
 <br>
 <p>
 When sending or receiving a message from each other, Server and Client
 will encode or decode it first to make sure that even if some people can
 get the messages in some illegal ways, the messages are just messy codes
 to them because of the lack of key to decode them.
 </p>
 <p>
 Since that for XOR Cipher, the process of encryption and decryption are
 exactly the same, we simply use <a href="Server.html#encode(java.lang.String)"><code>encode(String)</code></a> for both encoding
 and decoding.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>str</code> - <br>
         In encryption, str is the original message <br>
         In decryption, str is the encrypted message</dd>
<dt><span class="strong">Returns:</span></dt><dd>In encryption, return the encrypted message <br>
               In decryption, return the original message</dd></dl>
</li>
</ul>
<a name="getCurrentTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentTime</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getCurrentTime()</pre>
<div class="block">Gets the current time in a specific format.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the current time in the format of [HH:mm:ss]</dd></dl>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)
                 throws java.net.UnknownHostException</pre>
<div class="block">Main method: start the server.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>args</code> - command-line arguments</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.UnknownHostException</code> - may occur if local host name cannot be resolved into an
             address.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Server.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="Server.ThreadHandler.html" title="class in &lt;Unnamed&gt;"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?Server.html" target="_top">Frames</a></li>
<li><a href="Server.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
